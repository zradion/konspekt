<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style1.css" />
    <title>libraryPy</title>
</head>
<body>
    <div class="cont">
        <div class="left_right">
            <aside class="left">
    <p><a href="../index.html"><img src="../img/icon-home.png" alt="home"></a></p>
    <p><a href="#s0"><img src="../img/arrow-top.png" alt="arrow-top"></a></p>
     <p><i>Встроенные модули</i></p>
    <p><a href="#s1">random</a></p>
    <p><a href="#s2">sys</a></p>
    <p><a href="#s3">time</a></p>
    <p><a href="#s4">datetime</a></p>
    <p><a href="#s5">copy</a></p>
    <p><a href="#s6">math</a></p>
    <p><a href="#s7">Regex</a></p>
    <p><a href="#s8">pandas</a></p>
    <p><a href="#s9">pathlib</a></p>
    <p><a href="#s10">os</a></p>
    <p><a href="#s11">shutil</a></p>
    <p><a href="#s12">send2tresh</a></p>
    <p><a href="#s13">shelve</a></p>
    <p><a href="#s14">pprint</a></p>
    <p><i>Сторонние модули</i></p>
    <p><a href="#s50">pyperclip</a></p>
    <p><a href="#s51">requests</a></p>
    <p><a href="#s52">BeautifulSoup</a></p>
    <p><a href="#s53">selenium</a></p>
    <p><a href="#s54">pyinputplus</a></p>
    <p><a href="#s55">lxml</a></p>
    <p><a href="#s99">Ссылки.</a></p>            
            </aside>
    
            <aside class="right"><h1 align="center" id="s0">Library for Python.</h1>
                <h3 align="center">Встроенные модули:</h3>
  <section id="s1">
<b>import random</b><br>
<i>random.randint(a, b)</i> - случайное число от a до b, включая оба<br>
<i>random.choise([list])</i> - слуачайное значение из списка<br>
<i>random.choice(list(range(20)))</i> - случайное из 20<br>
<i>random.shuffle(list)</i> - перемешать список (на месте)<br>
<i>a = random.sample(list, 3)</i> - вернёт список из трёх рандомных значений<br>
<i>random.uniform(0,1)</i> - число от 0 до 1<br>
  </section>  

  <section id="s2">
<b>import sys</b><br>
<i>sys.exit()</i> (Try, except; Ctrl+c - выход без выброса ошибки)<br>
  </section>

  <section id="s3">
<b>import time</b><br>
<i>time.sleep(1)</i> - задержка 1с<br>
  </section>

  <section id="s4">
    <b>import datetime</b><br>
  </section>

  <section id="s5">
    <b>import copy</b><br>
<i>copy.copy(test)</i> - поверхносная копия<br>
<i>copy.deepcopy(test)</i> - глубокое копирование<br>
  </section>

  <section id="s6">
    <b>import math</b><br>
    math.pi<br>
    math.ceil(5.2) .. 6<br>
    math.floor(5.99) .. 5<br>
    .sqrt(); .sin(); .cos();<br>
  </section>

  <section id="s7">
    <b>import re</b><br>
Regular expressions (regexes)<br>
Специальные символы: <b>\ . $ ? + * {} [] () | </b> - надо экранировать (\) или использовать сырую строку (r"txt")<br>
pattern = re.compile(r'\d{3}) - pattern передаём в  re.compile() и сохраняем в regex object<br>
result = re.match(r"word", txt) - только в начале строки<br>
result = patern.search(txt).group()<br>
result = re.<b>search</b>(r"word", txt)[0] - первое совпадение<br>
print(result[0] if result else 'NO')<br>
result.group<b><ins>s</ins></b>() - вернёт кортеж из всех групп; можно исп множественное присвоение для разных частей патерна<br><br>

re.<b>fullmatch</b>(pattern, string) - проверить полное совпадение под шаблон<br>
print('Yes' if result else 'No')<br>
re.search, re.fullmatch - возвращают match-объект или None<br>
match.start(), match.end() - индекс начала совпадения и следующий после<br>
re.findinter - ничего не выдаёт<br><br>

Сохраняющие скобки (при search, fullmatch and finditer) не изменяют вывод, но можно получить инфо по каждой группе (если не исп квантификатор; тогда только для последнего соответсвия).<br>
Нумерация в группах: pattern = r"((\d)(\d))((\d)(\d))<br>
0 - весь шаблон; 1 - первые две цифры; 2 - первая цифра; 3 - вторая; 4 - вторые две цифры; 5 - третья цифра; 6 - четвёртая<br>
match = re.search(r"\s*([А-Яа-яЁё]+)(\d+)\s*", r"--Опять45--")<br>
print(match[0], match.start(0), match.end(0)) - весь шаблон<br>
print(match[1], match.start(1), match.end(1)) - первая группа<br><br>

re.<b>split</b>(pattern, string, maxsplit=0) - разделение по подстрокам, подходящим под шаблон<br>
print(re.split(r"\W+", "Где скажите мне, мои очки?"))
... ["Где", "скажите", "мне", "мои", "очки"]<br>

re.<b>findall</b>(pattern, string) - вернёт список строк, если нет групп и список кортежей, если есть (все непересекающиеся шаблоны).<br>
result = re.findall(r"стеклянн?ый", text) - вернёт список всех совпадений.<br>
result = te.findall(r"(\w+)\s*=\s*([^;]+)", text) - группа букв.цифр до ,возможно, прбелов; потом =; возможно пробелы; любые символы кроме ';'<br>
print(result)<br><br>

re.<b>finditer</b>(pattern, string) - итератор по непересекающимся шаблонам<br><br>

re.<b>sub</b>(pattern, repl, string, count=0) - заменить все непересекающиесся шаблоны на repl<br>
result2 = re.sub(r"old", r"new", txt) - заменить<br>
второй аргумент может быть имя ф-ции.<br>
print(result2)<br><br>

Использование групп при замене:<br>
Можно ссылаться на соответсвующую группу при помоощи \1, \2, ...(если групп больше 9, то \g<12>)<br>
print(re.sub(r"(\d\d)/(\d\d)/(\d{4})", r"\2.\1.\3", "03/25/2023")) - дата по амер; вернёт в нормальном порядке через точку<br><br>


Символьные классы: [A-z][0-9] // одна буква и одна цифра; спец символы здесь не работают(кроме \)<br>
<table>
  <tr><td><b>.</b></td><td>любой символ; кроме \n; с флагом re.DOTALL - весь текст (wildcard)</td></tr>
  <tr><td><b>\d</b></td><td>любая цифра [0-9]</td></tr>
  <tr><td><b>\D</b></td><td>любой не цифровой символ [^0-9]</td></tr>
  <tr><td><b>\s</b></td><td>любой пробельный символ [\t\n\r\f\v]</td></tr>
  <tr><td><b>\S</b></td><td>любой непробельный символ</td></tr>
  <tr><td><b>\w</b></td><td>буквы и цифры, знак подчёрк [a-zA-Z0-9] (\w+ выберет слова)</td></tr>
  <tr><td><b>\W</b></td><td>не буквы и цифры [^а-яА-Я0-9Ёё]</td></tr>
  <tr><td>  </td></tr>
  <tr><td><b>|</b></td><td>или</td></tr>
  <tr><td><b>\b</b></td><td>граница слова</td></tr>
  <tr><td><b>^</b></td><td>отрицание для символьного класса или начало строки</td></tr>
  <tr><td><b>$</b></td><td>конец строки</td></tr>
  <tr><td><b>\A</b></td><td>начало текста</td></tr>
  <tr><td><b>\B</b></td><td>отсутствие границы слова</td></tr>
  <tr><td><b>\Z</b></td><td>конец текста</td></tr>
  <tr><td><b>(?:=exp)</b></td><td>не сохраняющие скобки</td></tr>
  <tr><td><b>(?!exp)</b></td><td></td></tr>
  <tr><td><b>(?&lt;!exp)</b></td><td></td></tr>
</table><br>
<i>Квантификаторы</i><br>
 {m} - повторений; {mix,max}; {min,}; {,max}<br>
 жадные(мажорные, greedy) - по максимуму, нежадные(минорные, non-greedy) {2,5}? <br>
 <b>?</b> - {0,1} re.findall(r"стеклянн?ый")<br>
 <b>*</b> - {0,}<br>
 <b>+</b> - {1,}<br><br>

 (?:lat|lon){3} - или lat или lon в несохраняющих скобках<br>
 <b>flags:</b><br>
 <i>re.A (re.ASCII)</i><br>
 <i>re.I (re.IGNORCASE)</i> - без учёта реистра символов.(case-insensitive)<br>
 <i>re.M (re.MULTILINE)</i> - влияет на проверки ^, $<br>
 <i>re.S (re.DOTALL)</i> - ищет по всему тексту<br>
 <i>re.X (re.VERBOSE)</i> - позволяет вкл коментарии. <br>
 <i>re.DEBUG</i> - режим отладки.<br><br>

 <p><a href="https://habr.com/ru/articles/349860/" target="_blank" rel="noopener" >ShashkovS</a> - регулярные выражения</p>
 <p><a href="https://proproprogs.ru/modules/literaly-i-simvolnyy-klass" target="_blank" rel="noopener" >proproprogs</a> - регулярные выражения</p>
 <p><a href="https://docs.python.org/3/library/re.html" target="_blank" rel="noopener" >The Python Tutorial</a> - Python 3.11.4 documentation</p>
 <p><a href=" https://www.regular-expressions.info/" target="_blank" rel="noopener" >regular-expressions</a> - подробный материал</p>
  </section>

  <section id="s8">
    <b>import pandas as pd</b><br>
  </section>

  <section id="s9">
    <b>from pathlib import Path</b><br>
<i>p = Path("C:/Users/Al/spam.txt")</i><br>
Path.cwd() - текущая рабочая папка (current working directory)<br>
Path('spam', 'bacon', 'eggs') ..WindowsPath('spam/bacon/eggs') - объект<br>
str(Path(r'E:/spam') / 'bacon' / 'eggs') .. 'E:\\spam\\bacon\\eggs'<br>
if not p.exist():<br>
&nbsp;&nbsp;&nbsp;&nbsp; Path(r"E:/waffles").mkdir() - создать папку, если такой нет<br><br>

p.anchor .."C:\\"<br>
p.parent ..WindowsPath(("C:/Users/Al")) - объект<br>
p.name .. 'spam.txt'<br>
p.stem .. 'spam'<br>
p.suffix .. 'txt'<br>
p.drive .. 'C:'<br><br>

p.parents[0] - вернёт путь в виде строки<br>
p.parents[1] - часть пути на звено меньше<br><br>

list(p.glob('*')) - список из генератора всех файлов папки<br>
('*.txt') - список файлов с расширением .txt<br>
('*.?x?') - ? заменяет еденичный символ<br><br>

for file in list(p.glob('*.py')):<br>
&nbsp;&nbsp;&nbsp;&nbsp; print(file) - файлы с расширением .py<br><br>

p.exists() - Этот файл существует?<br>
p.is_file() - Это файл?<br>
p.is_dir() - Это папка?<br><br>

g = Path(r"G:/"); g.exists() .. False - флэшка не вставлена<br><br>

p = p / 'hello.txt' - сохранили в p путь до текстового файла (или создали его)<br>
p.write_text('Hello') - записали в файл слово; вернёт кол-во знаков<br>
p.read_text() .. 'Hello'<br><br>


  </section>

  <section id="s10">
    <b>import os</b><br>
os.chdir(r"E:/My Documens/книги/my_py") - сделать рабочей указаную папку.<br>
os.makedirs(r"E:/waffles") - создать новую папку<br>
os.path.abspath(path) - способ конвертировать относительный путь  в абсолютный<br>
os.path.isabs(path) - это абсолютный путь?<br>
os.path.relpath(path, start) - вернёт относительный путь от cwd или от указаного 'start'<br><br>

os.path.basename(r"E:/книги/spam.txt") .. spam.txt<br>
os.path.dirname(r"E:/книги/spam.txt") .. r"E:/книги"<br>
os.path.split(r"E:/книги/spam.txt") .. ("E:/книги", "spam.txt")<br>
(r"E:/книги/spam.txt").split(os.sep) .. ['E:', 'книги', 'spam.txt']<br><br>

os.listdir(path) - список файлов<br>
os.path.getsize(path) - размер файла в байтах (bytes)<br>
totalsize = 0<br>
for filename in os.listdir(path):<br>
&nbsp;&nbsp;&nbsp;&nbsp; totalsize += os.path.getsize(os.path.join(path, filename)) - список файлов в папке; с помощью <i>join</i> получаем абсолютный путь до файла<br><br>


  </section>

  <section id="s11">
    <b>import shutil</b>
  </section>

  <section id="s12">
    <b>import send2tresh</b>
  </section>

  <section id="s13">
    <b>import shelve</b><br>
сохранить как бинарные файлы.<br>
shelfFile = shelf.open('mydata') - принемает строку (не Path obj)<br>
cats = ['Zophie', 'Poork', 'Simon']<br>
shelfFile['cats'] = cats - сохранить как словарь по кллючу<br>
shelfFile.close(); появятся три файла с расширениями <i>.bak, .dat, .dir</i><br><br>

shelfFile = shelf.open('mydata') <br>
shelfFile['cats'] .. ['Zophie', 'Poork', 'Simon']<br>
list(shelfFile.keys()) .. ['cats']<br>
list(shefFile.values()) .. [['Zophie', 'Poork', 'Simon']]<br>
shelfFile.close()<br><br>

with shelve.open as sf:<br>
&nbsp;&nbsp;&nbsp;&nbsp; cats = sf['cats']<br>
  </section>

  <section id="s14">
    <b>import pprint</b><br>
  </section>

  <h3 align="center">Сторонние модули:</h3> 
windowsPowerShell(Администратор)<br>
  <section id="s50">
pip install pyperclip<br>
<b>import pyperclip</b><br>
pyperclip.copy('Hello, world')<br>
pyperclip.paste()<br>
  </section>

  <section id="51">
pip install requests<br>
<b>import requests</b><br>
url = "https:\.."<br>
r = requests.get(url)<br>
r.encoding<br>
r.text<br>
r.json()<br>
  </section>

  <section id="52">
pip install bs4<br>
<b>from bs4 import BeautifulSoup as bs</b><br>
soup = BeautifulSoup(r.text, 'html')<br>
soup.find('div', class_="class_name").find('a', "class_name")<br>
  </section>

  <section id="53">
pip install selenium<br>
<b>import selenium</b><br>
  </section>

  <section id="54">
    pip install --user pyinputplus  (для строки "выполнить")<br>
    <b>import pyinputplus as pyip</b><br>
<i>inputStr()</i><br>
<i>inputNum()</i> min=None, greaterThan=None, lessThan=None<br>
<i>inputChoice()</i><br>
<i>inputMenu()</i><br>
<i>inputDatetime()</i><br>
<i>inputYesNo()</i><br>
<i>inputBool()</i><br>
<i>inputEmail()</i><br>
<i>inputFilepath()</i><br>
<i>inputPassword()</i><br>
  </section>

  <section id="s55">
    pip install --user lxml<br>
используется вместо <i>'html.parser'</i>  (встроенного в Python) <br>
  </section>
            </aside>
        </div>
        <footer><h3 id="s99">Ссылки:</h3>
<p><a href="https://docs.python.org/3/tutorial/introduction.html" target="_blank" rel="noopener" >The Python Tutorial</a> - Python 3.11.4 documentation</p>
<p><a href="http://automatetheboringstuff.com/2e/chapter1/" target="_blank" rel="noopener" >automatetheboringsruff</a> - AlSweigart</p>
<p><a href="https://pythex.org/" target="_blank" rel="noopener" >pythex</a> - regex</p>
      </footer>
    </div>  
</body>
</html>