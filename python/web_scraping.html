<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style1.css" />
    <title>Web scraping</title>
</head>

<body>
  <div class="cont">
		<nav class="menu">
			<ul class="menu_list">
				<li><a href="../index.html"><img src="../img/icon-home.png" alt="home"></a></li>
				<li>
					<span>Python</span>
					<ul class="sub_menu_list">
						<li><a href="./startPy.html">startPy</a></li>
						<li><a href="./libraryPy.html">libraryPy</a></li>
						<li><a href="./dir_and_file.html">–ü–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã</a></li>
						<li><a href="./pictures.html">–ö–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –≥—Ä–∞—Ñ–∏–∫–∏</a></li>
            <li><a href="./data_analysis.html">–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö</a></li>
						<li><a href="./web_scraping.html">Web scraping</a></li>
						<li><a href="./flask.html">Flask</a></li>
						<li><a href="./django.html">Django</a></li>
            <li>–ò—Å–∫—É—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–µ–∫—Ç
              <ul>
                <li><a href="./gym.html">Gym</a></li>
                <li><a href="./ml.html">ML</a></li>
                <li><a href="./nlp.html">NLP</a></li>
              </ul>
					</ul>
				</li>
				<li>
					<span>Frontend</span>
					<ul class="sub_menu_list">
						<li><a href="../frontend/html.html">HTML</a></li>
						<li><a href="../frontend/css.html">CSS</a></li>
						<li><a href="../frontend/js.html">JavaScript</a></li>
						<li><a href="../frontend/jsDom.html">JavaScript DOM</a></li>
					</ul>
				</li>
				<li>
					<span>Books</span>
					<ul class="sub_menu_list">
						<li><a href="../books/english.html">Books in English</a></li>
						<li><a href="../books/math.html">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</a></li>
						<li><a href="../books/environment.html">–û–∫—Ä—É–∂–µ–Ω–∏–µ</a></li>
						<li><a href="../books/digest.html">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</a></li>
					</ul>
				</li>
			</ul>
		</nav>

    <div class="left_right">
      <aside class="left">
<p><a href="#s1">webbrowser</a></p>
<p><a href="#s2">requests</a></p>
<p><a href="#s3">beautiful soup</a></p>
<p><a href="#s4">selenium</a></p>
      </aside>

      <aside class="right"><h2 align="center" id="s0">Web scraping</h2>
    <section id="s1"> <b>import webbrowser</b><br><br>

url = "https://eirc.spb.ru/info/tarif/energosnabzhenie/" - –ï–ò–†–¶<br>
<i>webbrowser.open(url)</i> - –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏<br>
    </section> 

    <section id="s2"><b>import requests</b><br>
<p><a href="https://www.youtube.com/watch?v=HfBJ0_1c4PU&list=RDCMUCN3nx9hIzgItJeDb5FFfy0Q&index=3" target="_blank" rel="noopener" >Python Hub Studio</a> - (YouTube) requests.</p>

url —Å–æ–¥–µ—Ä–∂–∏—Ç: protocol//host//port//resource path//query<br>
–ú–µ—Ç–æ–¥—ã: GET, POST, PUT, DELETE, HEAD, TRACE, OPTIONS<br>
response = requests.get(url, headers) Response object<br>
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å time.sleep(3) –∏ headers = headers(–∏–Ω—Ñ–æ –æ –∫–æ–º–ø–µ, –æ–±–æ–ª–æ—á–∫–µ)<br>
type(response) .. &lt;class 'requests.models.Response'><br>
if response.status_code == requests.codes.ok .. 200<br>
len(response.text) - –∫–æ–ª-–≤–æ –∑–Ω–∞–∫–æ–≤<br>`
print(response.text[:250]) - –ø–µ—á–∞—Ç—å —á–∞—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞<br>
try:<br>
&nbsp;&nbsp;&nbsp;&nbsp;response.raise_for_status()<br>
except Exception as exc:<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(f"problem: {exc}")<br><br>

–ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ response –≤ —Ñ–∞–π–ª–µ:<br>
playFile = open('RomeoAndJuliet.txt', 'wb') - –æ—Ç–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç –¥–ª—è –±–∏–Ω–∞—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏.<br>
for chunk in response.iter_content(100_000):<br>
&nbsp;&nbsp;&nbsp;&nbsp;playFile.write(chunk)<br>
playFile.close()
    </section>

    <section id="s3"><h3 align="center">BeautifulSoup</h3>

<i>pip install bs4, lxml</i>; <b>from bs4 import BeautifulSoup</b><br><br>

response = requests.get(url)<br>
soup = BeautifulSoup(response.text, 'lxml') - –º–µ—Ç–æ–¥ text –∏ –ø–∞—Ä—Å–µ—Ä.<br>
div = soup.find('div', class_="name") - –ø–µ—Ä–≤—ã–π –≤—Å—Ç—Ä–µ—á–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç.<br>
div.text.strip() - —Ç–µ—Å–∫—Ç –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–∞ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤.<br>
div = soup.find('div', {"class": "name", "id": "aaa"}) - –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.<br>
divs = <i>soup.find_all</i>('div', class_="name") - —Å–ø–∏—Å–æ–∫<br>
all_a = <i>soup.find_all</i>('a') - –ø–æ–ª—É—á–∏–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫.<br>
<i>div.get()</i><br>
for item in all_a:<br>
&nbsp;&nbsp;&nbsp;&nbsp;item_text = item.text - —Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏.<br>
&nbsp;&nbsp;&nbsp;&nbsp;item_url = item.get("href") - url –∞–¥—Ä–µ—Å.<br>
&nbsp;&nbsp;&nbsp;&nbsp;item_url = item["href"] - url –∞–¥—Ä–µ—Å.<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(f"{item_text}: {item_url})<br><br>

<i>.find_parent() .find_parents()</i><br>
find_parent - –±–ª–∏–∂–∞–π—à–∏–π —Ä–æ–¥–∏—Ç–µ–ª—å –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–π (–ø–æ –∫–ª–∞—Å—Å—É, id)<br>
find_parents - –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Å–∞–º–æ–≥–æ –≤–µ—Ä—Ö–∞.<br>
<i>.next_element .previos_element</i><br>
–ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É (–≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã)<br>
<i>.find_next()</i> - —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–≥.<br>
<i>.find_next_sibling() .find_previous_sibling()</i><br><br>

find_a_by_text = soup.find('a', text="–û–¥–µ–∂–¥–∞ –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö")<br>
find_a_by_text = soup.find('a', text=re.compile("–û–¥–µ–∂–¥–∞"))<br><br>


<p><a href="https://youtu.be/lOfm04oLD1U?si=TBC3Dm3u0Hb0Bd9A" target="_blank" rel="noopener" >Python Hub Studio</a> - (YouTube) –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–∞–π—Ç–æ–≤.</p>
<p><a href="https://youtu.be/7hn1_t2ZtJQ?si=XZtP8e4PFwBETwV3" target="_blank" rel="noopener" >PythonToday</a> - (YouTube) –ø–∞—Ä—Å–∏–Ω–≥.</p>
    </section>

    <section id="s4"><h3 align="center">Selenium</h3>

<i>pip install selenium</i>; <b>from selenium import webdriver</b><br><br>

–°–∫–∞—á–∞–π—Ç–µ –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä (YandexDriver)<br>
–Ø–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π —Ñ–æ—Ä–∫ Chromium, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä.<br>

–°–∫–∞—á–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é YandexDriver —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞:<br>
üîó https://github.com/yandex/YandexDriver/releases<br>

–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞<br>

–†–∞—Å–ø–∞–∫—É–π—Ç–µ .exe-—Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, yandexdriver.exe) –≤ —É–¥–æ–±–Ω—É—é –ø–∞–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, C:\WebDriver\).<br>
# –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –¥—Ä–∞–π–≤–µ—Ä—É YandexDriver<br>
driver_path = r'C:\WebDriver\yandexdriver.exe'  # –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—É—Ç—å<br>

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞<br>
options = webdriver.ChromeOptions()<br>

# –£–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É –Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä–∞ (–µ—Å–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)<br>
options.binary_location = r'C:\Users\–í–∞—à_–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\AppData\Local\Yandex\YandexBrowser\Application\browser.exe'<br>

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞<br>
driver = webdriver.Chrome(executable_path=driver_path, options=options)<br>

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ø–Ω–¥–µ–∫—Å<br>
driver.get("https://ya.ru")<br>

# –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—Ä–∞—É–∑–µ—Ä —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)<br>
import time<br>
time.sleep(5)<br>
driver.quit()<br><br>

# <i> FireFox</i><br>
from selenium import webdriver<br>
browser = webdriver.Firefox() # –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä FireFox<br>
browser.get('https://inventwithpython.com') # –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞<br><br>

<i>find_element_*</i> - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω–∏—á–Ω—ã–π WebElement object<br>
<i>find_elements_*</i> - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ WebElement_* objects<br><br>

browser.find_element_by_class_name(name)<br>
browser.find_elements_by_class_name(name) Elements that use the CSS
class name<br><br>

browser.find_element_by_css_selector(selector)<br>
browser.find_elements_by_css_selector(selector) Elements that match the CSS
selector<br><br>

browser.find_element_by_id(id)<br>
browser.find_elements_by_id(id) Elements with a matching id
attribute value<br><br>

browser.find_element_by_link_text(text)<br>
browser.find_elements_by_link_text(text) <a> elements that completely
	match the text provided<br><br>

browser.find_element_by_partial_link_text(text)<br>
browser.find_elements_by_partial_link_text(text) <a> elements that contain the
	text provided<br><br>

browser.find_element_by_name(name)<br>
browser.find_elements_by_name(name) Elements with a matching name
attribute value<br><br>

browser.find_element_by_tag_name(name)<br>
browser.find_elements_by_tag_name(name) Elements with a matching tag name
(case-insensitive; an <a> element is
matched by 'a' and 'A')<br><br>

tag_name - The tag name, such as 'a' for an <a> element<br>

get_attribute(name) - The value for the element‚Äôs name attribute<br>

text - The text within the element, such as 'hello' in <span>hello </span><br>

clear() - For text field or text area elements, clears the text typed into it<br>

is_displayed() - Returns True if the element is visible; otherwise returns False<br>

is_enabled() - For input elements, returns True if the element is enabled; otherwise returns False<br>

is_selected() - For checkbox or radio button elements, returns True if the element is selected; otherwise returns False<br>

location - A dictionary with keys 'x' and 'y' for the position of the element in the page<br><br>
    </section>
      </aside>
    </div>
  </div>
</body>
</html>